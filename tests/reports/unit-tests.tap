1..184
ok 1 parse_args_noArgs_defaultsAreSet
ok 2 parse_args_skipNvidia_setsFlag
ok 3 parse_args_skipKvm_setsFlag
ok 4 parse_args_skipVfio_setsFlag
ok 5 parse_args_skipBridge_setsFlag
ok 6 parse_args_allSkipFlags_setsAllFlags
ok 7 parse_args_gpuModeExclusive_setsMode
ok 8 parse_args_gpuModeFlexible_setsMode
ok 9 parse_args_gpuModeInvalid_returnsError
ok 10 parse_args_gpuModeNoValue_returnsError
ok 11 parse_args_bridgeName_setsName
ok 12 parse_args_bridgeNameNoValue_returnsError
ok 13 parse_args_bridgeSubnet_setsSubnet
ok 14 parse_args_bridgeSubnetNoValue_returnsError
ok 15 parse_args_dryRun_setsFlag
ok 16 parse_args_yes_setsFlag
ok 17 parse_args_yShorthand_setsFlag
ok 18 parse_args_reboot_setsFlag
ok 19 parse_args_verbose_setsFlag
ok 20 parse_args_verboseShorthand_setsFlag
ok 21 parse_args_multipleFlags_allSet
ok 22 parse_args_unknownOption_returnsError
ok 23 parse_args_unknownOption_outputContainsFlag
ok 24 parse_args_version_outputContainsVersion
ok 25 parse_args_help_outputContainsUsage
ok 26 parse_args_helpShorthand_outputContainsUsage
ok 27 detect_primary_nic: detects NIC from default route
ok 28 detect_primary_nic: fails when no default route exists
ok 29 detect_primary_nic: handles NIC with no IPv4 address
ok 30 detect_primary_nic: reads DNS from resolv.conf as fallback
ok 31 detect_primary_nic: detects /32 direct-route mode with onlink flag
ok 32 detect_primary_nic: does not set direct-route mode for /24 subnet
ok 33 detect_primary_nic: /32 without onlink flag does not trigger direct-route
ok 34 detect_primary_nic: detects NIC on typical server with eno1
ok 35 configure_bridge_interface: creates Netplan config with static IP
ok 36 configure_bridge_interface: creates Netplan config with DHCP when no IP
ok 37 configure_bridge_interface: skips when config already exists
ok 38 configure_bridge_interface: dry-run shows what would be done
ok 39 configure_bridge_interface: fails when PRIMARY_NIC not set
ok 40 configure_bridge_interface: uses custom bridge name
ok 41 configure_bridge_interface: backs up existing Netplan configs
ok 42 configure_bridge_interface: disables DHCP on physical NIC
ok 43 configure_bridge_interface: includes forward-delay parameter
ok 44 configure_bridge_interface: /32 direct-route uses on-link gateway
ok 45 configure_bridge_interface: /32 direct-route disables STP
ok 46 configure_bridge_interface: standard mode uses STP enabled
ok 47 configure_bridge_interface: dry-run mentions direct-route mode
ok 48 apply_bridge_config: dry-run shows what would be done
ok 49 apply_bridge_config: runs netplan apply
ok 50 apply_bridge_config: fails when netplan apply fails
ok 51 verify_bridge_connectivity: dry-run shows what would be done
ok 52 verify_bridge_connectivity: verifies bridge is UP with IP
ok 53 verify_bridge_connectivity: warns when bridge interface missing
ok 54 verify_bridge_connectivity: warns when gateway unreachable
ok 55 phase_bridge_setup: dry-run completes all steps
ok 56 phase_bridge_setup: fails when NIC detection fails
ok 57 phase_bridge_setup: propagates configure_bridge_interface error
ok 58 prompt_reboot: does nothing when reboot not required
ok 59 prompt_reboot: in --yes mode without --reboot shows warning
ok 60 prompt_reboot: dry-run does nothing even with reboot required
ok 61 is_pkg_installed_installedPkg_returnsZero
ok 62 is_pkg_installed_missingPkg_returnsNonZero
ok 63 is_command_available_existingCmd_returnsZero
ok 64 is_command_available_missingCmd_returnsNonZero
ok 65 is_file_present_existingFile_returnsZero
ok 66 is_file_present_emptyFile_returnsNonZero
ok 67 is_file_present_missingFile_returnsNonZero
ok 68 is_line_in_file_linePresent_returnsZero
ok 69 is_line_in_file_lineAbsent_returnsNonZero
ok 70 is_line_in_file_fileMissing_returnsNonZero
ok 71 is_grub_param_set_paramPresent_returnsZero
ok 72 is_grub_param_set_paramAbsent_returnsNonZero
ok 73 is_grub_param_set_fileMissing_returnsNonZero
ok 74 is_service_active_nonexistentService_returnsNonZero
ok 75 is_service_enabled_nonexistentService_returnsNonZero
ok 76 is_module_loaded_loadedModule_returnsZero
ok 77 is_module_loaded_missingModule_returnsNonZero
ok 78 ensure_pkg_installed_dryRun_doesNotInstall
ok 79 ensure_pkg_installed_alreadyInstalled_skips
ok 80 ensure_service_running_dryRun_doesNotStart
ok 81 install_kvm_packages: skips when all packages installed
ok 82 install_kvm_packages: dry-run shows what would be installed
ok 83 install_kvm_packages: KVM_PACKAGES array contains expected packages
ok 84 configure_libvirtd: dry-run shows what would be done
ok 85 configure_libvirtd: adds user to groups when SUDO_USER set
ok 86 configure_libvirtd: skips groups when user already member
ok 87 configure_libvirtd: skips groups when running as root without SUDO_USER
ok 88 verify_kvm_readiness: dry-run skips verification
ok 89 verify_kvm_readiness: reports success with kvm-ok and modules
ok 90 verify_kvm_readiness: detects AMD KVM module
ok 91 verify_kvm_readiness: warns when kvm-ok fails
ok 92 verify_kvm_readiness: warns when KVM module not loaded
ok 93 verify_kvm_readiness: warns when /dev/kvm missing
ok 94 verify_kvm_readiness: warns when libvirtd not running
ok 95 phase_kvm_setup: dry-run completes without side effects
ok 96 phase_kvm_setup: succeeds when everything already installed
ok 97 phase_kvm_setup: skipped via run_phase when --skip-kvm set
ok 98 log_init_validPath_initialisesSuccessfully
ok 99 log_info_message_outputContainsINFO
ok 100 log_success_message_outputContainsOK
ok 101 log_warn_message_outputContainsWARN
ok 102 log_error_message_outputContainsFAIL
ok 103 log_debug_verboseOff_noOutput
ok 104 log_debug_verboseOn_outputContainsDBUG
ok 105 log_phase_phaseNumber_outputContainsPhase
ok 106 log_step_stepName_outputContainsStep
ok 107 log_dry_run_message_outputContainsDRYRUN
ok 108 _log_to_file_initialised_writesToFile
ok 109 _log_to_file_initialised_containsTimestamp
ok 110 _log_to_file_notInitialised_doesNotCrash
ok 111 detect_nvidia_gpu: detects single NVIDIA GPU
ok 112 detect_nvidia_gpu: detects multiple NVIDIA GPUs
ok 113 detect_nvidia_gpu: fails when no NVIDIA GPU present
ok 114 detect_nvidia_gpu: exports PCI slot address
ok 115 detect_nvidia_gpu: exports PCI vendor:device ID
ok 116 detect_nvidia_gpu: installs pciutils when lspci missing (dry-run)
ok 117 add_nvidia_repository: skips when repo already configured
ok 118 add_nvidia_repository: dry-run shows what would be done
ok 119 install_nvidia_drivers: skips when nvidia-smi already works
ok 120 install_nvidia_drivers: dry-run shows what would be installed
ok 121 install_cuda_toolkit: skips when nvcc already available
ok 122 install_cuda_toolkit: dry-run shows what would be installed
ok 123 install_nvidia_container_toolkit: skips when nvidia-ctk available
ok 124 install_nvidia_container_toolkit: dry-run shows what would be done
ok 125 verify_nvidia_setup: reports healthy GPU with nvidia-smi
ok 126 verify_nvidia_setup: warns when nvidia-smi unavailable
ok 127 verify_nvidia_setup: warns when nvidia-smi fails
ok 128 verify_nvidia_setup: dry-run skips verification
ok 129 phase_nvidia_setup: runs all steps in order with GPU present
ok 130 phase_nvidia_setup: dry-run completes without side effects
ok 131 phase_nvidia_setup: fails when no GPU detected
ok 132 phase_nvidia_setup: sets reboot flag when nvidia-smi unavailable
ok 133 phase_nvidia_setup: skipped via run_phase when --skip-nvidia set
ok 134 detect_nvidia_gpu: handles various NVIDIA GPU types
ok 135 detect_nvidia_gpu: handles Tesla/data centre GPUs
ok 136 detect_nvidia_gpu: handles H100 GPUs
ok 137 run_phase_normalExecution_succeeds
ok 138 run_phase_skipped_outputContainsSkipping
ok 139 run_phase_skipped_phaseNotExecuted
ok 140 run_phase_phaseFails_returnsNonZero
ok 141 run_phase_phaseSucceeds_outputContainsComplete
ok 142 phase_nvidia_setup_dryRun_succeeds
ok 143 phase_kvm_setup_dryRun_succeeds
ok 144 phase_vfio_setup_dryRun_succeeds
ok 145 phase_bridge_setup_dryRun_succeeds
ok 146 phase_vmctl_install_stub_succeeds
ok 147 show_banner_outputContainsProjectName
ok 148 print_summary_outputContainsComplete
ok 149 print_summary_dryRun_outputContainsDryRun
ok 150 check_ubuntu_version_ubuntu2404_succeeds
ok 151 check_ubuntu_version_ubuntu2404_outputContainsDetected
ok 152 check_ubuntu_version_wrongVersion_fails
ok 153 check_ubuntu_version_notUbuntu_fails
ok 154 check_ubuntu_version_missingFile_fails
ok 155 check_ubuntu_version_fedora_fails
ok 156 check_root_nonRoot_fails
ok 157 check_root_asRoot_succeeds # skip Test must be run as root user
ok 158 check_network_reachable_succeeds
ok 159 check_network_unreachable_fails
ok 160 check_secure_boot_disabled_succeeds
ok 161 check_secure_boot_enabled_failsWithInstructions
ok 162 check_secure_boot_dryRun_skipsWhenMokutilMissing
ok 163 check_secure_boot_enabledEFI_failsWithRemoteInstructions
ok 164 detect_cpu_vendor: detects Intel CPU
ok 165 detect_cpu_vendor: exports CPU_VENDOR variable
ok 166 detect_cpu_vendor: exports IOMMU_PARAM variable
ok 167 configure_grub_iommu: skips when params already set
ok 168 configure_grub_iommu: dry-run shows what would be done
ok 169 configure_grub_iommu: appends params to existing GRUB line
ok 170 configure_grub_iommu: adds new line when GRUB_CMDLINE missing
ok 171 configure_grub_iommu: creates backup of grub file
ok 172 configure_grub_iommu: fails when grub file missing
ok 173 configure_vfio_modules: dry-run shows what would be done
ok 174 configure_vfio_modules: dry-run shows PCI ID in exclusive mode
ok 175 configure_vfio_modules: adds modules to /etc/modules
ok 176 configure_vfio_modules: flexible mode logs on-demand message
ok 177 detect_iommu_groups: handles missing IOMMU groups gracefully
ok 178 detect_iommu_groups: counts available groups
ok 179 handle_vfio_reboot: silent when no reboot required
ok 180 handle_vfio_reboot: warns when reboot required
ok 181 handle_vfio_reboot: sets global REBOOT_REQUIRED flag
ok 182 phase_vfio_setup: dry-run completes without side effects
ok 183 phase_vfio_setup: skipped via run_phase when --skip-vfio set
ok 184 phase_vfio_setup: succeeds with grub already configured
